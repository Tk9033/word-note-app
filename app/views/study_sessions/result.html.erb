<div class="container mx-auto px-4 py-8">
  <div class="max-w-2xl mx-auto text-center">
    <h1 class="text-3xl font-bold mb-4">学習結果</h1>

    <div class="stats shadow mb-6">
      <div class="stat">
        <div class="stat-title">解答数</div>
        <div class="stat-value"><%= @answered %> / <%= @total %></div>
      </div>
      <div class="stat">
        <div class="stat-title">正解率</div>
        <div class="stat-value text-success"><%= @correct_count %></div>
      </div>
    <div class="stat">
      <div class="stat-title">正解率</div>
      <div class="stat-value"><%= number_to_percentage(@correct_count.to_f / @answered * 100, precision: 0) if @answered > 0 %></div>
    </div>
  </div>

  <% if @wrong_results.any? %>
    <h2 class="text-2xl font-bold mb-4">間違えた問題</h2>
    <div class="text-left space-y-4">
      <% @wrong_results.each do |result| %>
        <div class="card bg-base-100 shadow-md">
          <div class="card-body">
            <p class="font-semibold">問題: <%= result.card.question %></p>
            <p>答え: <%= result.card.answer %></p>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>

    <% if @wrong_results.present? %>
      <div class="mt-8">
        <%= button_to "間違えた問題にもう１度挑戦!!",
              retry_wrong_deck_study_session_path(@deck, @session),
              method: :post,
              class: "btn btn-warning" %>
      </div>
    <% end %>
  </div>
</div>